#!/usr/bin/env bash

# Paste lines to a shareable URL.
# Usage: pastebin /path/to/file...
#        command-with-output | pastebin

set -eu

send() {
    curl -sSL --data-binary @"$1" https://paste.rs
}

if (($# == 0)); then
    send /dev/stdin
else
    for file in "$@"; do
        ext=${file##*/}
        ext=${ext##*.}
        url=$(send "$file")
        echo "$url${ext:+.$ext}"
    done
fi

#!/usr/bin/env bash

# Return a sequence of dates.

# The start date parameter can be any string that `date` recognizes,
# and every argument after the count parameter is passed on to `date`, so you
# can do stuff like the following examples:

# Get the dates for the next five hours, starting now:
# dateseq now "+1 hour" 5

# Get the UTC dates in ISO 8601 format for the first three months of 2001:
# dateseq 2001-01-01 "+1 month" 3 --utc --iso-8601

set -eu

timestamp=$1
increment=$2
count=$3
shift 3

timestamp=$(date --date="$timestamp" "$@")

for ((i = 0; i < count; i++)); do
    printf "%s\n" "$timestamp"
    timestamp=$(date --date="$timestamp $increment" "$@")
done

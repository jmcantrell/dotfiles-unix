#!/usr/bin/env sh

# Convert a git repository origin from http to ssh.

set -e

url=$(git config remote.origin.url)

# ensure starting with http url
echo "$url" | grep -E -q '^https?://' || exit 1

name=${url##*/}
user=${url%/*}
user=${user##*/}
host=${url#http*://}
host=${host%%/*}

# set ssh url
git config remote.origin.url "git@$host:$user/$name"

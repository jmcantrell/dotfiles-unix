#!/usr/bin/env bash

# Post files/links to a shareable URL.
# Usage: postbin ITEM [ACTION]  # url, file, shorten

set -eu

src=${1:?Missing the item to post}
action=${2:-}

if [[ $src == *://* ]]; then
    target=$src
else
    target=@$src
fi

if [[ -z $action ]]; then
    if [[ $src == *://* ]]; then
        action="url"
    else
        action="file"
    fi
fi

exec curl -F "$action=$target" https://0x0.st

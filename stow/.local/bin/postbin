#!/usr/bin/env bash

# Post files/links to a shareable URL.
# Usage: postbin ITEM [ACTION]

set -euo pipefail

src=${1:?missing the item to post}
action=${2:-}

if [[ -z $action ]]; then
    if [[ $src == *://* ]]; then
        action="url"
    else
        action="file"
    fi
fi

exec curl -F "$action=$src" https://0x0.st

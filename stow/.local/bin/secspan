#!/usr/bin/env bash

# Display seconds in a human readable format.
# Usage: secspan seconds
# Examples:
#   secspan 3600  # 1h
#   secspan 93784  # 1d 2h 3m 4s
#   secspan 604800  # 7d

seconds=${1:-0}

minute=60
hour=$(( $minute * 60 ))
day=$(( $hour * 24 ))

days=$(( $seconds / $day ))
seconds=$(( $seconds - ($days * $day) ))

hours=$(( $seconds / $hour ))
seconds=$(( $seconds - ($hours * $hour) ))

minutes=$(( $seconds / $minute ))
seconds=$(( $seconds - ($minutes * $minute) ))

unset summary

[[ $days > 0 ]] && summary+=" ${days}d"
[[ $hours > 0 ]] && summary+=" ${hours}h"
[[ $minutes > 0 ]] && summary+=" ${minutes}m"
[[ $seconds > 0 ]] && summary+=" ${seconds}s"

echo "${summary## }"

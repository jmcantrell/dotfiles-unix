#!/usr/bin/env bash

# Sync local dotfiles directory to another host.
# Usage: ssh-copy-dotfiles HOST

set -eu

host=$1

rsync -avz --delete --delete-excluded \
    --cvs-exclude --exclude=.git --exclude=.gitmodules \
    ~/.dotfiles "$host":~

ssh "$host" "cd ~/.dotfiles && ./install.sh && ./stow.sh && ./config.sh"

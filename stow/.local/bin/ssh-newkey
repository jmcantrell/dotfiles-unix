#!/usr/bin/env bash

# Create an ssh key with sensible defaults.
# Displays the resulting public key and copies it to the clipboard.
# Usage: ssh-newkey [name]

set -euo pipefail

key=$HOME/.ssh/${1:-id_rsa}
comment="$USER@$HOSTNAME $(date -I)"

ssh-keygen -t rsa -b 4096 -f "$key" -C "$comment"

cbi <"$key.pub"
cat "$key.pub"
